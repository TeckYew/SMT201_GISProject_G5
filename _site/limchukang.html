<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Deep Dive into Lim Chu Kang – GROUP 5</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">GROUP 5</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">HOME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./overview.html"> 
<span class="menu-text">OVERVIEW</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./methodology.html"> 
<span class="menu-text">METHODOLOGY</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-result--discussion" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">RESULT &amp; DISCUSSION</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-result--discussion">    
        <li>
    <a class="dropdown-item" href="./analysis.html">
 <span class="dropdown-text">Overall Analysis in Singapore</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./limchukang.html">
 <span class="dropdown-text">Deep Dive into Lim Chu Kang</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./lesson.html"> 
<span class="menu-text">LESSON LEARNED</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./poster.html"> 
<span class="menu-text">POSTER</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">ABOUT</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#lim-chu-kang" id="toc-lim-chu-kang" class="nav-link active" data-scroll-target="#lim-chu-kang">Lim Chu Kang</a>
  <ul class="collapse">
  <li><a href="#aspect" id="toc-aspect" class="nav-link" data-scroll-target="#aspect">Aspect</a></li>
  <li><a href="#slope" id="toc-slope" class="nav-link" data-scroll-target="#slope">Slope</a></li>
  <li><a href="#hillshade" id="toc-hillshade" class="nav-link" data-scroll-target="#hillshade">Hillshade</a></li>
  </ul></li>
  <li><a href="#final-suitability-of-land-form-features-aspect-slope-hillshade" id="toc-final-suitability-of-land-form-features-aspect-slope-hillshade" class="nav-link" data-scroll-target="#final-suitability-of-land-form-features-aspect-slope-hillshade">Final Suitability of land form features: Aspect, Slope, Hillshade</a></li>
  <li><a href="#site-selection" id="toc-site-selection" class="nav-link" data-scroll-target="#site-selection">Site Selection</a>
  <ul class="collapse">
  <li><a href="#building-proximity-within-the-area" id="toc-building-proximity-within-the-area" class="nav-link" data-scroll-target="#building-proximity-within-the-area">Building Proximity within the area</a></li>
  <li><a href="#roads-proximity-within-the-area" id="toc-roads-proximity-within-the-area" class="nav-link" data-scroll-target="#roads-proximity-within-the-area">Roads Proximity within the area</a></li>
  <li><a href="#current-land-use-planning-in-the-area" id="toc-current-land-use-planning-in-the-area" class="nav-link" data-scroll-target="#current-land-use-planning-in-the-area">Current Land Use planning in the area</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a>
  <ul class="collapse">
  <li><a href="#optimal-solar-panel-installation-sites-in-lim-chu-kang" id="toc-optimal-solar-panel-installation-sites-in-lim-chu-kang" class="nav-link" data-scroll-target="#optimal-solar-panel-installation-sites-in-lim-chu-kang">Optimal Solar Panel Installation Sites in Lim Chu Kang</a>
  <ul class="collapse">
  <li><a href="#land-use-suitability" id="toc-land-use-suitability" class="nav-link" data-scroll-target="#land-use-suitability">Land Use Suitability</a></li>
  <li><a href="#spatial-characteristics" id="toc-spatial-characteristics" class="nav-link" data-scroll-target="#spatial-characteristics"><strong>Spatial Characteristics</strong></a></li>
  <li><a href="#building-proximity" id="toc-building-proximity" class="nav-link" data-scroll-target="#building-proximity"><strong>Building Proximity</strong></a></li>
  <li><a href="#infrastructure-access" id="toc-infrastructure-access" class="nav-link" data-scroll-target="#infrastructure-access"><strong>Infrastructure Access</strong></a></li>
  <li><a href="#why-other-sites-are-less-suitable" id="toc-why-other-sites-are-less-suitable" class="nav-link" data-scroll-target="#why-other-sites-are-less-suitable">Why Other Sites are less suitable:</a></li>
  <li><a href="#implementation-recommendation" id="toc-implementation-recommendation" class="nav-link" data-scroll-target="#implementation-recommendation">Implementation Recommendation</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Deep Dive into Lim Chu Kang</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="lim-chu-kang" class="level1">
<h1>Lim Chu Kang</h1>
<p>In the Overview Analysis in Singapore, we found that Lim Chu Kang is topped as the first choice of solar farm in Singapore. To further analyse which site in Lum Chu Kang is suitable for solar farm, we will look into these criteria:</p>
<ol type="1">
<li>Aspect</li>
<li>Slope</li>
<li>Hillshade</li>
<li>Building Proximity within the area</li>
<li>Roads Proximity within the area</li>
<li>Current Land use planning in the area</li>
</ol>
<p>For the factors of aspect, slope and hillshade, as these factors are considered as landform factors. We will conduct a final suitability test base on the 3 factors.</p>
<p>Now, let’s take a look of each of the factor first:</p>
<section id="aspect" class="level2">
<h2 class="anchored" data-anchor-id="aspect">Aspect</h2>
<p>Aspect refers to the compass direction a slope faces. In solar energy planning, <strong>south-facing slopes</strong> are typically the most optimal in the northern hemisphere. For Singapore (near the equator), <strong>flat or slightly south-facing areas</strong> receive the most consistent sunlight throughout the year.</p>
<p><img src="images/aspect_limchukang.png" class="img-fluid"></p>
<p>From the above map, we can see that the aspect suitability. Much of Lim Chu Kang appears to be in lighter red to white zones, which means moderate to high suitability. The northern and central areas show a mix of white and pale red, suggesting optimal solar exposure. A few dark red patches (unsuitable aspect) are scattered, especially along edges—these may face away from the sun or be steeply sloped.</p>
</section>
<section id="slope" class="level2">
<h2 class="anchored" data-anchor-id="slope">Slope</h2>
<p><img src="images/slope_lck.png" class="img-fluid"></p>
<p>From the above map, we can see that the central and majority of the interior of Lim Chu Kang, which are classified as class 5 (white), are the most suitable for solar panel deployment. These areas offer expansive, contiguous flat land ideal for efficient and cost-effective installation.</p>
</section>
<section id="hillshade" class="level2">
<h2 class="anchored" data-anchor-id="hillshade">Hillshade</h2>
<p>Hillshade is a visual representation of terrain based on light and shadow, simulating sunlight at a specific angle. In suitability analysis, it reflects <strong>how much sun an area actually receives</strong>, considering elevation and shading from terrain.</p>
<p><img src="images/hillshade_lck.png" class="img-fluid"></p>
<p>From the above map, we can see that most of Lim Chu Kang shows light orange to white, indicating good exposure to sunlight. Some small dark red zones may be in shadow (e.g.&nbsp;valleys or behind elevation changes). Overall, terrain shading is not a major concern, which is good news for solar feasibility.</p>
</section>
</section>
<section id="final-suitability-of-land-form-features-aspect-slope-hillshade" class="level1">
<h1>Final Suitability of land form features: Aspect, Slope, Hillshade</h1>
<p><img src="images/final_suitability_lck.png" class="img-fluid"></p>
<p>From the above image, we can tell that the Lim Chu Kang are generally in high suitability score. However, this is insufficient to decide which specific site is good for installing solar farm.</p>
<p>Therefore, we decide to scope down the area for selection by selecting areas of that are within the top 20% suitability score.</p>
<p>Here is the results:</p>
<p><img src="images/top_suitability_lck.png" class="img-fluid"></p>
<p>Base on the final suitability score, we can come up with a few selection on site that we can dive into: (ranking is not relevant)</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 18%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th>No.</th>
<th>Site</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sungei Buloh Wetland Reserve</td>
<td>Large flat land and feasibility of laying solar panels over the water body</td>
</tr>
<tr class="even">
<td>2</td>
<td>Eastern Lim Chu Kang</td>
<td>Noticeable green patches are also found along the&nbsp;eastern edge, especially near the main access road leading into Lim Chu Kang</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Southern and Western Edges</td>
<td>Area is sparse</td>
</tr>
<tr class="even">
<td>4</td>
<td>Southern and Western Edges</td>
<td>Area is sparse</td>
</tr>
</tbody>
</table>
<p><img src="images/clipboard-1761206069.png" class="img-fluid"></p>
</section>
<section id="site-selection" class="level1">
<h1>Site Selection</h1>
<p>To investigate each of the site, these factors are being considered:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Site</th>
<th>Land Use</th>
<th>Building Proximity</th>
<th>Road Proximity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1: Sungei Buloh Wetland Reserve</td>
<td>Park</td>
<td>230m-369m</td>
<td>&lt;100m</td>
</tr>
<tr class="even">
<td>2: Eastern Lim Chu Kang</td>
<td>Utitlity</td>
<td>369m-530m</td>
<td>100-200m</td>
</tr>
<tr class="odd">
<td>3: Southern and Western Edges</td>
<td>Open Space</td>
<td>230m-369m</td>
<td>&lt;100m</td>
</tr>
<tr class="even">
<td>4: Southern and Western Edges</td>
<td>Open Space</td>
<td>230m-369m</td>
<td>&lt;100m</td>
</tr>
</tbody>
</table>
<p><img src="images/clipboard-1855345637.png" class="img-fluid"></p>
<section id="building-proximity-within-the-area" class="level2">
<h2 class="anchored" data-anchor-id="building-proximity-within-the-area">Building Proximity within the area</h2>
<p>Lim Chu Kang is an area that generally has limited commercial buildings and military facilities. We want to explore how these spaces can help us identify potential areas for solar farms based on the space constraints in the different areas of Lim Chu Kang identified.</p>
<p><img src="images/building.png" class="img-fluid"></p>
<p>Due to Singapore’s space constraint, if Lim Chu Kang were to be re-purposed for solar farm, about 20 to 25 acres land area will be required to install the solar farm on land itself, assuming that 1 megawatt of solar energy usually require 4 to 5 acres of land.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 100%">
</colgroup>
<tbody>
<tr class="odd">
<td><p><strong>1: Sungei Buloh Wetland Reserve</strong></p>
<p>Size: Approximately 130 hectares (about 321 acres)</p>
<p>Comparison: A 20 to 25 acre solar farm would cover roughly 6-8% of the reserve’s area. Space constraints as seen in the map is more than sufficient for installation of solar farm in that area represented by a dark blue point signifying adequate space for landspace with some buildings occupying that area.</p></td>
</tr>
<tr class="even">
<td><p><strong>2: Eastern Lim Chu Kang</strong></p>
<p>Size: Approximately 17.3 square kilometers (1,730 hectares or about 4,274 acres).</p>
<p>Comparison: A 20–25 acre solar farm would occupy about 0.5–0.6% of the entire planning area. Huge landspace with highest potential for solar farm with the darkest blue point representing most landspace.</p></td>
</tr>
<tr class="odd">
<td><p><strong>3: Southern and Western Edges</strong></p>
<p>Details: These areas are part of the broader Lim Chu Kang region, which includes various land uses such as agriculture, military training areas, and nature reserves. Specific size data for these subregions isn’t readily available, but given the total area of Lim Chu Kang, a 20–25 acre solar farm would represent a small fraction of these edges.</p>
<p>Space constraints as seen in the map is sufficient for installation of solar farm in that area represented by a dark blue point signifying adequate space for landspace with some buildings occupying that area.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="roads-proximity-within-the-area" class="level2">
<h2 class="anchored" data-anchor-id="roads-proximity-within-the-area">Roads Proximity within the area</h2>
<p>Road proximity serve as an informatics for development and installation of solar farms during the construction phase. The darker areas in red represent the most suitable areas that are closer to the roads whereas the lighter reds represent areas further away from the roads. This is done by using the acccessibility factor of:<br>
&lt;=100m = 5, 100-200m = 4, 200-300m = 3, 300-500m = 2, &gt;500m = 1 from roads. This will help us rank the suitability for solar farm installation using road proximity as a factor for economical savings.</p>
<p><img src="images/road.png" class="img-fluid" width="514"></p>
<p>Based on the 3 different sites considered for the road accessibility based on the darker red colored areas for Lim Chu Kang, we can see that the distance from the roads are mostly &lt;100 meter, considering the output values to be mutually exclusive with min and max, reflecting the cut-off values. These areas area the most suitable for solar farms due to its accessibility to roads and space constraints (e.g., free from buildings).</p>
<p><img src="images/road-parts.png" class="img-fluid" width="512"></p>
</section>
<section id="current-land-use-planning-in-the-area" class="level2">
<h2 class="anchored" data-anchor-id="current-land-use-planning-in-the-area">Current Land Use planning in the area</h2>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<section id="optimal-solar-panel-installation-sites-in-lim-chu-kang" class="level2">
<h2 class="anchored" data-anchor-id="optimal-solar-panel-installation-sites-in-lim-chu-kang">Optimal Solar Panel Installation Sites in Lim Chu Kang</h2>
<p>Based on the detailed site analysis and considering Singapore’s unique constraints for renewable energy deployment, we recommend Site 2: Eastern Lim Chu Kang as the best option for large-scale solar panel installation. Here’s our comprehensive justification for this selection:</p>
<section id="land-use-suitability" class="level3">
<h3 class="anchored" data-anchor-id="land-use-suitability">Land Use Suitability</h3>
<p>Site 2 is classified as “Utility” land, which makes it perfect for our solar project because:</p>
<ul>
<li><p>It avoids the environmental problems we’d face at Site 1 (which is a protected Wetland Reserve).</p></li>
<li><p>The “Utility” designation means the land is already meant for infrastructure projects. This enhance the feasibility of using the site for installation of solar panels.</p></li>
</ul>
</section>
<section id="spatial-characteristics" class="level3">
<h3 class="anchored" data-anchor-id="spatial-characteristics"><strong>Spatial Characteristics</strong></h3>
<p>The satellite image shows Site 2 features a large, contiguous open area with what appears to be cleared land with minial vegetation:</p>
<ul>
<li><p>The expansive area allows for economies of scale in installation and maintenance.</p></li>
<li><p>The site appears to have less dense vegetation, comparing to site 3 and 4. It helps reducing clearing costs and environmental impact.</p></li>
</ul>
</section>
<section id="building-proximity" class="level3">
<h3 class="anchored" data-anchor-id="building-proximity"><strong>Building Proximity</strong></h3>
<p>Site 2 has the greatest distance from existing buildings (369m-530m) among all options:</p>
<ul>
<li><p>It can reduce the shading effects of buildings and hence increase the efficiency of the solar panels.</p></li>
<li><p>It can reduce potential conflicts with existing building uses.</p></li>
</ul>
</section>
<section id="infrastructure-access" class="level3">
<h3 class="anchored" data-anchor-id="infrastructure-access"><strong>Infrastructure Access</strong></h3>
<p>Although Site 2 is slightly further from the roads compared to other sites, the distance is still practical:</p>
<ul>
<li><p>Close enough for efficient construction access and maintenance</p></li>
<li><p>Sufficient proximity to enable grid connection without excessive transmission infrastructure</p></li>
</ul>
</section>
<section id="why-other-sites-are-less-suitable" class="level3">
<h3 class="anchored" data-anchor-id="why-other-sites-are-less-suitable">Why Other Sites are less suitable:</h3>
<p><u><strong>Site 1 ((Sungei Buloh Wetland Reserve):</strong></u></p>
<p>Despite good accessibility (&lt;100m to roads), its designation as a waterbody in a nature reserve creates significant environmental concerns. Wetland reserves may have strict ecological protections that would conflict with large-scale solar development. In addition, despite floating solar is an option in Singapore, environmentally sensitive waterbodies may not be an ideal location with environmental restrictions.</p>
<p><u><strong>Site 3 &amp; 4 (Southern &amp; Western Edges):</strong></u></p>
<p>Site 3 and 4 are smaller than Site 2 so the amount of solar panels will not be as many as Site 2. In addition, they are closed to buildings like Animal Plant &amp; Health Centre, Sungei Gedong Medical Centre, etc. Proximity to buildings might increase shading effect as well. Installing solar panels next to the plot of land might not be the most ideal situation, reducing the efficiency in deployment.</p>
</section>
<section id="implementation-recommendation" class="level3">
<h3 class="anchored" data-anchor-id="implementation-recommendation">Implementation Recommendation</h3>
<p>As the land use for Site 2 is considered as “Utility”, the government might change utilize the land for other usages in the future. To prepare for the possible changes in land use, we recommend this:</p>
<ul>
<li><p>Deploy a mobile design similar to SL2 at Changi Business Park that allows for future redeployment if land use changes</p></li>
<li><p>Install Tier-1 solar panels to maximize the efficiency of solar panels and the generation power</p></li>
</ul>
</section>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<p>Wikimedia Foundation. (2024, January 23). Nature reserves in Singapore. Wikipedia. <a href="http://en.wikipedia.org/wiki/Nature_reserves_in_Singapore" class="uri">http://en.wikipedia.org/wiki/Nature_reserves_in_Singapore</a></p>
<p>Lim Chu Kang. SgWiki. (n.d.). <a href="https://sgwiki.com/wiki/Lim_Chu_Kang" class="uri">https://sgwiki.com/wiki/Lim_Chu_Kang</a></p>
<p>Lim <em>Chu Kang urban agriculture district</em>. Sasaki. (n.d.). <a href="https://www.sasaki.com/projects/lim-chu-kang-urban-agriculture-district" class="uri">https://www.sasaki.com/projects/lim-chu-kang-urban-agriculture-district</a></p>
<p>SERIS. (2020). <em>Update of the Solar Roadmap for Singapore</em>. <a href="https://www.seris.nus.edu.sg/wp-content/uploads/2023/07/Update-of-the-Solar-Roadmap-for-Singapore-March-2020.pdf" class="uri">https://www.seris.nus.edu.sg/wp-content/uploads/2023/07/Update-of-the-Solar-Roadmap-for-Singapore-March-2020.pdf</a></p>
<p>‌<em>TE SolarLand 2 – Singapore’s largest ground-mounted utility-scale solar farm</em>. (2020). Tesl2.Energy. <a href="https://tesl2.energy/" class="uri">https://tesl2.energy/</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>