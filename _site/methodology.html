<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>METHODOLOGY – GROUP 5</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-6bd9cfa162949bde0a231f530c97869d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">GROUP 5</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">HOME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./overview.html"> 
<span class="menu-text">OVERVIEW</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./methodology.html" aria-current="page"> 
<span class="menu-text">METHODOLOGY</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-result--discussion" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">RESULT &amp; DISCUSSION</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-result--discussion">    
        <li>
    <a class="dropdown-item" href="./analysis.html">
 <span class="dropdown-text">Overall Analysis in Singapore</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./limchukang.html">
 <span class="dropdown-text">Deep Dive into Lim Chu Kang</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./lesson.html"> 
<span class="menu-text">LESSON LEARNED</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./poster.html"> 
<span class="menu-text">POSTER</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">ABOUT</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#data-collection-preparation" id="toc-data-collection-preparation" class="nav-link" data-scroll-target="#data-collection-preparation">Data Collection/ Preparation</a>
  <ul class="collapse">
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  </ul></li>
  <li><a href="#multiple-attribute-decision-making-madm-feasibility-topography-analysis" id="toc-multiple-attribute-decision-making-madm-feasibility-topography-analysis" class="nav-link" data-scroll-target="#multiple-attribute-decision-making-madm-feasibility-topography-analysis">Multiple-Attribute Decision Making (MADM) Feasibility Topography Analysis</a>
  <ul class="collapse">
  <li><a href="#power-grid-electricity-flow" id="toc-power-grid-electricity-flow" class="nav-link" data-scroll-target="#power-grid-electricity-flow">Power Grid Electricity Flow</a></li>
  <li><a href="#surface-irradiance" id="toc-surface-irradiance" class="nav-link" data-scroll-target="#surface-irradiance">Surface Irradiance</a>
  <ul class="collapse">
  <li><a href="#irradiance-data" id="toc-irradiance-data" class="nav-link" data-scroll-target="#irradiance-data">Irradiance Data</a></li>
  <li><a href="#irradiance-area-calculation" id="toc-irradiance-area-calculation" class="nav-link" data-scroll-target="#irradiance-area-calculation">Irradiance Area Calculation</a></li>
  </ul></li>
  <li><a href="#property-prices" id="toc-property-prices" class="nav-link" data-scroll-target="#property-prices">Property Prices</a></li>
  </ul></li>
  <li><a href="#final-site-selection" id="toc-final-site-selection" class="nav-link" data-scroll-target="#final-site-selection">Final Site Selection</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">METHODOLOGY</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="overview" class="level1">
<h1>Overview</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot 2025-04-13 121555.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>The chart above shows the overall process that our team employed in our project. In this page, we will go through each of these phases into further detail.</p>
<ul>
<li><p>Landform</p>
<ul>
<li><p>Slope</p></li>
<li><p>Aspect</p></li>
<li><p>Hillshade</p></li>
<li><p>Distance proximity among buildings</p></li>
</ul></li>
<li><p>Environment</p>
<ul>
<li>Surface Irradiation (Sunlight)</li>
</ul></li>
<li><p>Economy</p>
<ul>
<li><p>Property Prices</p></li>
<li><p>Power Grid Electricity Flow</p></li>
<li><p>Accessibility to Road (construction phase)</p></li>
</ul></li>
<li><p>Culture and Society</p>
<ul>
<li><p>Natural Reserve</p></li>
<li><p>Built-Up Area</p></li>
</ul></li>
</ul>
</section>
<section id="data-collection-preparation" class="level1">
<h1>Data Collection/ Preparation</h1>
<p>Data was collected from various sources to be used in the different analyses. For the purpose of this project, we will be using various land-form and satellite data. The data is taken from <a href="https://data.gov.sg/">Data Gov</a> and NASA website. The table below will show the sources of the files that we have used for our analysis.</p>
<p>For the Land Form data taken from Data.Gov website:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>File Name</th>
<th>Description</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Layers of Singapore for Master Plan 2019</td>
<td>Provides the map layer for Singapore.</td>
<td><p><a href="https://data.gov.sg/datasets?query=land+use+2019&amp;page=1&amp;resultId=d_90d86daa5bfaa371668b84fa5f01424f" class="uri">https://data.gov.sg/datasets?query=land+use+2019&amp;page=1&amp;resultId=d_90d86daa5bfaa371668b84fa5f01424f</a></p>
<ul>
<li><p><a href="https://data.gov.sg/datasets?query=2019+subzone+masterplan&amp;resultId=d_0900fdcfdb4666fe2a630f37a532fc06&amp;page=1">Master Plan 2019 Subzone Boundary (No Sea) (KML)</a></p></li>
<li><p><a href="https://data.gov.sg/datasets?query=landuse+2019&amp;page=1&amp;resultId=d_f8adc7bd980dd15861c83ff370a72eaa">Amendment to Master Plan 2019 Land Use layer</a></p></li>
</ul></td>
</tr>
<tr class="even">
<td>Bulding, Transport, Road</td>
<td>For building, transports and road data layer</td>
<td><a href="https://download.geofabrik.de/asia/malaysia-singapore-brunei.html" class="uri">https://download.geofabrik.de/asia/malaysia-singapore-brunei.html</a></td>
</tr>
<tr class="odd">
<td>Property Prices</td>
<td>The prices for properties in Singapore. Only 2023 and 2024 will be used for the purpose of the project.</td>
<td><a href="https://data.gov.sg/datasets/d_8b84c4ee58e3cfc0ece0d773c8ca6abc/view" class="uri">https://data.gov.sg/datasets/d_8b84c4ee58e3cfc0ece0d773c8ca6abc/view</a></td>
</tr>
<tr class="even">
<td>Derived map of global electricity transmission and distribution lines</td>
<td>Electricity transmission of power grids occurring in Singapore.</td>
<td><a href="https://energydata.info/dataset/derived-map-global-electricity-transmission-and-distribution-lines" class="uri">https://energydata.info/dataset/derived-map-global-electricity-transmission-and-distribution-lines</a></td>
</tr>
</tbody>
</table>
<p>Others:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>File Name</th>
<th>Description</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><ul>
<li>NASA POWER Monthly and Annual API</li>
</ul></td>
<td><ul>
<li>This API was used to retrieve surface irradiance data for Singapore.</li>
</ul></td>
<td><a href="https://power.larc.nasa.gov/api/pages/?urls.primaryName=Monthly+%26+Annual" class="uri">https://power.larc.nasa.gov/api/pages/?urls.primaryName=Monthly+%26+Annual</a></td>
</tr>
<tr class="even">
<td><ul>
<li>DEM of Singapore for analysis</li>
</ul></td>
<td><ul>
<li>Used for the analysis of suitability</li>
</ul></td>
<td><a href="https://ugl.sg/2022/10/03/dem-of-singapore-srtm/" class="uri">https://ugl.sg/2022/10/03/dem-of-singapore-srtm/</a></td>
</tr>
</tbody>
</table>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>
</section>
</section>
<section id="multiple-attribute-decision-making-madm-feasibility-topography-analysis" class="level1">
<h1>Multiple-Attribute Decision Making (MADM) Feasibility Topography Analysis</h1>
<p>To select Lim Chu Kang as the specific study area for solar panel installation, we considered six critical factors using MADM or what we call Multiple-Criteria Decision Analytics (MCDA) methodology. Each factor plays a unique role in determining the suitability of the area for solar energy deployment. Below is an explanation of each factor and why it was chosen:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 11%">
<col style="width: 88%">
</colgroup>
<thead>
<tr class="header">
<th>Factors</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Aspect</strong></td>
<td>Aspect refers to the direction that a slope faces, measured in degrees (0–360°). South-facing slopes (157.5°–202.5°) are optimal for solar panels in Singapore because they receive the most direct sunlight throughout the day due to Singapore’s equatorial position.</td>
</tr>
<tr class="even">
<td><strong>Slope</strong></td>
<td>Slope measures the steepness of terrain, expressed in degrees. Flat or gently sloping areas (&lt;10°) are ideal for solar panels as they allow proper installation angles without structural challenges.</td>
</tr>
<tr class="odd">
<td><strong>Hillshade</strong></td>
<td>Hillshade simulates terrain illumination based on sun position (azimuth and altitude). It identifies areas exposed to direct sunlight versus shaded regions.</td>
</tr>
<tr class="even">
<td><strong>Surface Ir-radiance</strong></td>
<td>Surface irradiance measures the amount of solar radiation received per unit area, typically in kWh/m²/year. Higher irradiance levels directly correlate with higher energy generation potential.</td>
</tr>
<tr class="odd">
<td><strong>Property Prices</strong></td>
<td>Property prices influence the economic feasibility of solar projects. Areas with lower land costs reduce overall project expenses, making large-scale installations more viable</td>
</tr>
<tr class="even">
<td><strong>Power Electricity Grid Flow</strong></td>
<td>Proximity to existing electrical grid infrastructure is crucial for connecting solar farms and minimizing transmission costs.</td>
</tr>
</tbody>
</table>
<section id="power-grid-electricity-flow" class="level2">
<h2 class="anchored" data-anchor-id="power-grid-electricity-flow">Power Grid Electricity Flow</h2>
<p>The Power Grid Electricity Flow map illustrates electricity transmission from power grids across Singapore, with grid locations highlighted in red. Notably, the central region exhibits denser and more interconnected electrical flow, indicating high infrastructure activity. However, this area is also heavily populated with properties and transport networks—represented by the blue and red points—leaving limited space for solar farm installations. In contrast, areas toward the western region, including Lim Chu Kang, show less development and extended (but lower) grid density, suggesting greater potential for solar farm deployment due to the availability of open land and fewer competing land-use demands.</p>
<p><img src="images/electricity.png" class="img-fluid" width="378"></p>
</section>
<section id="surface-irradiance" class="level2">
<h2 class="anchored" data-anchor-id="surface-irradiance">Surface Irradiance</h2>
<section id="irradiance-data" class="level3">
<h3 class="anchored" data-anchor-id="irradiance-data">Irradiance Data</h3>
<p>Prediction Of Worldwide Energy Resources (POWER) is a project that seeks to provide data and services related to renewable energy like solar energy. The open API services provided by POWER allows for retrieval of irradiance data for our specified region of the world. This API was used to retrieve the monthly Irradiance values for Singapore from the years 2023-2025.</p>
<p>The parameters for the API Call are as summarised below:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Parameter</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>parameters</code></td>
<td>The climate or solar parameter to retrieve (only one allowed per request)</td>
</tr>
<tr class="even">
<td><code>community</code></td>
<td>Defines the user community and data context</td>
</tr>
<tr class="odd">
<td><code>latitude-min</code></td>
<td>Minimum latitude of the bounding box</td>
</tr>
<tr class="even">
<td><code>latitude-max</code></td>
<td>Maximum latitude of the bounding box</td>
</tr>
<tr class="odd">
<td><code>longitude-min</code></td>
<td>Minimum longitude of the bounding box</td>
</tr>
<tr class="even">
<td><code>longitude-max</code></td>
<td>Maximum longitude of the bounding box</td>
</tr>
<tr class="odd">
<td><code>start</code></td>
<td>Start year of the data request</td>
</tr>
<tr class="even">
<td><code>end</code></td>
<td>End year of the data request</td>
</tr>
<tr class="odd">
<td><code>format</code></td>
<td>Output file format</td>
</tr>
</tbody>
</table>
<p>The API Call that was used to retrieve the data was therefore:</p>
<p><code>https://power.larc.nasa.gov/api/temporal/monthly/point?start=2023&amp;end=2025&amp;latitude=1.3521&amp;longitude=103.8198&amp;parameters=ALLSKY_SFC_SW_DWN&amp;community=RE&amp;format=CSV</code></p>
<p>The API call returns monthly Irradiance values, as well as an annual average. For our analysis, the annual average was used.</p>
</section>
<section id="irradiance-area-calculation" class="level3">
<h3 class="anchored" data-anchor-id="irradiance-area-calculation">Irradiance Area Calculation</h3>
<p>In QGIS, we first load in the Masterplan 2019 Subzone Boundaary Layer.</p>
<ul>
<li><p>After which, a new field, “Area” was calculated using the field calculator, with the expression : <code>$area</code></p></li>
<li><p>This area was multiplied by the annual irradiance value of 2023, since it was the year with complete readings.</p></li>
<li><p>The result was then symbolised on a map with graduated colouring.</p></li>
</ul>
</section>
</section>
<section id="property-prices" class="level2">
<h2 class="anchored" data-anchor-id="property-prices">Property Prices</h2>
<p>Property prices are a key economic factor influencing the feasibility of solar farm installations. Areas with higher property values—indicated by darker shades of blue—pose greater challenges, as the cost of land acquisition and ongoing maintenance can outweigh the potential benefits. In contrast, sub-zones represented by lighter shades of blue offer more viable opportunities for solar deployment due to their relatively lower land costs, making them more economically attractive for long-term investment.</p>
<p><img src="images/property.png" class="img-fluid" width="356"><br>
</p>
</section>
</section>
<section id="final-site-selection" class="level1">
<h1>Final Site Selection</h1>
<p>With all the factors considered, we decided that the most suitable location for a potential solar farm would be in <strong>Lim Chu Kang.</strong></p>
<p>We then performed further analysis of the isolated Lim Chu Kang subzone to seek out suitable locations <em>within</em> Lim Chu Kang. Factors that were considered were land suitability, proximity to roads, proximity to buildings, and landuse types.</p>
<p>For land suitability, the same topography method was employed, but on the area of Lim Chu Kang. Proximity to roads was considered as it would be a crucial factor in construction of solar fams, in terms of transportation of construction materials. We also analysed proximity between buildings so to identify areas with large enough open spaces that could house a solar farm.</p>
<p>Lastly, for landuse types, we identified that Open Spaces and Agricultural Spaces were the best types of land to host a solar farm on. Open Spaces are available land spaces that are not being used to anything else, and would therefore have the lowest barrier to building a solar farm. Agricultural Lands often contain huge areas of land that are directly exposed to the sun, making them highly suitable spaces as well. For these reasons, landuse analysis was also employed to narrow down the area.</p>
<p>Ultimately, the northern area of Lim Chu Kang, <strong>Sungei Buloh</strong>, was chosen as the most optimal location for a potential solar farm in Singapore.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>